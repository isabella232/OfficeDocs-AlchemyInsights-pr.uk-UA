---
title: Помилки програми
ms.author: v-aiyengar
author: AshaIyengar21
manager: dansimp
ms.date: 01/25/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Normal
ms.collection: Adm_O365
ms.custom:
- "9004342"
- "7841"
ms.openlocfilehash: ce4c89da79112726ed4fb25527edc8d082bd37f239595b9eab7279abeeecfd7e
ms.sourcegitcommit: b5f7da89a650d2915dc652449623c78be6247175
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 08/05/2021
ms.locfileid: "53931470"
---
# <a name="application-errors"></a>Помилки програми

Шукаєте відомості про коди помилок **AADSTS,** які повертаються зі служби маркерів безпеки Azure Active Directory (Azure AD) (STS)? Прочитайте коди помилки автентифікації й авторизації [Azure AD,](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) щоб знайти описи помилок AADSTS, виправлення та деякі рекомендовані вирішення.

Помилки авторизації можуть бути результатом кількох різних проблем, більшість із яких призводять до помилки 401 або 403. Наприклад, усі вони можуть призвести до помилок авторизації:

- Неправильні [потоки отримання маркерів доступу](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) 
- Неналежне налаштування [областей дозволів](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-scopes) 
- Відсутність [дозволу](https://docs.microsoft.com/azure/active-directory/develop/active-directory-devhowto-multi-tenant-overview#understanding-user-and-admin-consent)

Щоб усунути поширені помилки авторизації, спробуйте виконати наведені нижче дії, які найкраще відповідають отриманій помилці. Може застосовуватися кілька з них.

**401 Не авторизовано: ваш маркер дійсний?**

Переконайтеся, що програма пропонує дійсний маркер доступу до microsoft Graph як частину запиту. Ця помилка часто означає, що в заголовку запиту автентифікації може бути відсутній маркер доступу, або ж він неприпустимий чи прострочений. Ми наполегливо радимо використовувати бібліотеку [Microsoft Authentication Library (MSAL)](https://docs.microsoft.com/azure/active-directory/develop/msal-overview) для отримання маркерів доступу. Крім того, ця помилка може виникнути, якщо спробувати використати маркер делегованого доступу, наданий особистому обліковому запису Microsoft, для доступу до API, який підтримує лише робочі або навчальні облікові записи (облікові записи організації).

**403 Заборонено: ви вибрали правильний набір дозволів?**

Переконайтеся, що ви намагались отримати правильний набір дозволів на основі API-Graph Microsoft. Рекомендовані найменш привілейовані дозволи наведено в усіх розділах довідкових Graph API Microsoft. Крім того, ці дозволи користувач або адміністратор повинен надати програмі. Надання дозволів зазвичай відбувається на сторінці згоди або через надання дозволів за допомогою розриву реєстрації програми Порталу Azure. Виберіть у програмі меню **Параметри**, клацніть **Необхідні дозволи** та виберіть пункт **Надати дозволи**.

- [Дозволи Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference) 
- [Загальні відомості про дозволи й згоди в Azure AD](https://docs.microsoft.com/azure/active-directory/develop/v2-permissions-and-consent) 

**403 Заборонено: програма одержала маркер, який відповідає вибраним дозволам?**

Переконайтеся, що тип запитаних або наданих дозволів відповідає типу маркера доступу, який придбав програма. Можливо, ви запитуватимете й надаєте дозволи програми, але замість маркерів потоків облікових даних клієнта використовується делеговані маркери перебігу облікових даних, а запит на надання та надання уповноважених дозволів, а використання маркерів потоків облікових даних клієнта замість маркерів потоків делегованих кодів.

- [Отримання доступу від імені користувачів і через делеговані дозволи](https://docs.microsoft.com/graph/auth_v2_user) 
- [Azure AD v2.0 – потік коду авторизації OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) 
- [Отримання доступу без дозволів користувача (служби daemon) і програми](https://docs.microsoft.com/graph/auth_v2_service) 
- [Azure AD v2.0 – потік облікових даних клієнта OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) 

**403 Заборонено: скидання пароля**

Наразі між службами немає дозволів елемента daemon програми, які дозволяють скидати паролі користувачів. Ці API підтримуються лише потоками інтерактивного делегованого коду, коли ввійшов адміністратор.

- [Дозволи Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference)

**403 Заборонено: чи має користувач доступ і ліцензію?**

Для потоків делегованих кодів корпорація Майкрософт Graph обчислення, чи дозволено запит на основі дозволів, наданих програмі, і наданих користувачу дозволів. Зазвичай ця помилка вказує на те, що користувач має недостатньо прав, щоб виконати запит, або не має ліцензії на отримання даних, до яких намагається отримати доступ. Успішно виконати запит можуть лише користувачі з необхідними дозволами або ліцензіями.

**403 Заборонено: ви вибрали правильний API ресурсу?**

Служби API, як-от Microsoft Graph, перевіряти, чи адаптований позов (аудиторія) в отриманому маркері доступу збігається зі значенням, яке очікується самостійно, а якщо ні, в результаті виникає помилка «Заборонено 403». Поширена помилка, що призводить до цього, полягає у спробі використати маркер, отриманий для API Azure AD Graph, API Outlook або API SharePoint/OneDrive для виклику Microsoft Graph (або навпаки). Переконайтеся, що ресурс (або область), для якого ваша програма отримала маркер, збігається із API, який програма викликає.

**"400 Помилковий запит" або "403 Заборонено": чи дотримується користувач політики умовного доступу своєї організації?**

Через політики центра доступу організації користувач, який має доступ до ресурсів Microsoft Graph через програму, може бути складно отримати додаткові відомості, яких немає в маркері доступу, який початково придбано. У такому разі під час одержання маркера доступу ваша програма отримує помилку 400 з твердженням *interaction_required* або 403 з твердженням *insufficient_claims* під час виклику Microsoft Graph. В обох випадках відповідь про помилку містить додаткові відомості, які можна представити авторизованій кінцевій точці, щоб лякати користувача на отримання додаткової інформації (наприклад, багатофакторної автентифікації або реєстрації пристрою).

- [Обробка проблем з умовним доступом за допомогою MSAL ](https://docs.microsoft.com/azure/active-directory/develop/msal-handling-exceptions#conditional-access-and-claims-challenges)
- [Рекомендації для розробників щодо умовного доступу в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/conditional-access-dev-guide)
